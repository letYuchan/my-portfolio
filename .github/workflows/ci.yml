name: CI # ğŸ”§ Continuous Integration íŒŒì´í”„ë¼ì¸ ì´ë¦„

on:
  push:
    branches:
      - main # main ë¸Œëœì¹˜ì— pushë  ë•Œ ì‹¤í–‰
      - dev # dev ë¸Œëœì¹˜ì— pushë  ë•Œë„ ì‹¤í–‰

jobs:
  test-and-build:
    runs-on: ubuntu-latest # GitHubì´ ì œê³µí•˜ëŠ” Ubuntu ìµœì‹  ë²„ì „ VM í™˜ê²½ì—ì„œ ì‹¤í–‰

    steps:
      - name: Checkout
        uses: actions/checkout@v4 # ğŸ“¥ í˜„ì¬ ì €ì¥ì†Œ ì½”ë“œë¥¼ CI í™˜ê²½ìœ¼ë¡œ ì²´í¬ì•„ì›ƒ

      - name: Setup pnpm
        uses: pnpm/action-setup@v4
        with:
          version: 9 # pnpm v9 ì„¤ì¹˜

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 20 # Node.js v20ì„ ì‚¬ìš©
          cache: pnpm # pnpm íŒ¨í‚¤ì§€ ìºì‹± í™œì„±í™” â†’ ë¹Œë“œ ì†ë„ í–¥ìƒ

      - name: Install deps
        run: pnpm install --frozen-lockfile # ğŸ“¦ lockfile ê¸°ë°˜ìœ¼ë¡œ ì˜ì¡´ì„± ì„¤ì¹˜ (ë³€ê²½ ë¶ˆê°€)

      - name: Run tests
        run: pnpm test # ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ CI ì „ì²´ ì‹¤íŒ¨)

      - name: Build
        run: pnpm build # ğŸ—ï¸ í”„ë¡œì íŠ¸ ë¹Œë“œ (í…ŒìŠ¤íŠ¸ í†µê³¼ í›„)
